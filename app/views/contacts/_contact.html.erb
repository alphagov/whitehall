<%
  contact_class ||= []
  if local_assigns.include?(:contact_counter) and contact_counter % 3 == 0
    contact_class << "clear-contact"
  end
  if local_assigns[:is_main]
    contact_class << 'main'
  end
  contact_class << 'contact' unless contact.is_a? Contact
%>
<%= content_tag_for(:div, contact, class: contact_class.join(' ')) do %>
  <div class="content">
    <h2><%= contact.title %></h2>

    <div class="vcard contact-inner">
      <% if contact.has_postal_address? %>
        <%= render_hcard_address(contact) %>
      <% end %>

      <% if contact.email.present? || contact.contact_form_url.present? || contact.contact_numbers.any? %>
        <div class="email-url-number">
          <% if contact.email.present? %>
            <p class="email">
              <span class="type"><%= t('contact.email') %></span>
              <%= mail_to contact.email, contact.email, class: 'email' %>
            </p>
          <% end %>
          <% if contact.contact_form_url.present? %>
            <p class="contact_form_url">
              <span class="type"><%= t('contact.contact_form') %></span>
              <%= link_to contact.contact_form_url.truncate(25), contact.contact_form_url %>
            </p>
          <% end %>
          <% contact.contact_numbers.each do |number| %>
            <p class="tel">
              <span class="type"><%= number.label %></span>
              <%= number.number %>
            </p>
          <% end %>
        </div>
      <% end %>

      <% if contact.comments.present? %>
        <p class="comments"><%= format_with_html_line_breaks(h(contact.comments)) %></p>
      <% end %>
    </div>
  </div>
<% end %>
