<%
  extra_class ||= ""
  show_type ||= true
%>
<% if recently_changed_documents.any? %>
  <section id="recently-changed" class="latest-documents">
    <h1 class="label"><%= title %></h1>
    <table class="document-list <%= extra_class %>">
      <thead class="visuallyhidden">
        <tr>
          <th scope="col">Title</th>
          <th scope="col">Date</th>
          <th scope="col">Document Type</th>
          <th scope="col">Organisations</th>
        </tr>
      </thead>
      <tbody>
      <% recently_changed_documents.each do |document| %>
        <%= content_tag_for :tr, document, class: 'document-row' do %>
          <th scope="row" class="title attribute">
            <%= link_to document.title, public_document_path(document)  %>
          </th>
          <td class="date attribute">
            <%= published_or_updated(document).titleize %>
            <%= absolute_date((document.public_timestamp).to_datetime, class: 'published-at') %>
          </td>
          <td class="type attribute">
            <%= document.display_type %>
          </td>
          <% if document.organisations.any? %>
            <td class="attribute organisations">
              <%= document.organisations.map { |o|
                organisation_display_name(o) }.to_sentence.html_safe %>
            </td>
          <% end %>
        <% end %>
      <% end %>
      </tbody>
    </table>
  </section>
<% end %>
