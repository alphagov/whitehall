<% if promotional_feature_item.image.present? && promotional_feature_item.image.send("cache_id").present? %>
  <%= hidden_field_tag "#{name}[image_cache]", promotional_feature_item.image.file.file.gsub("/govuk/whitehall/carrierwave-tmp/", "") %>
<% end %>

<%= image_tag(promotional_feature_item.image.url(:s300)) if promotional_feature_item.image_url %>

<%= render "govuk_publishing_components/components/file_upload", {
  label: {
    text: "Item image (required)",
  },
  name: "#{name}[image]",
  id: "#{id}_image",
  value: promotional_feature_item.image,
  error_items: errors_for(promotional_feature_item.errors, :image)
} %>

<%= render "govuk_publishing_components/components/input", {
  label: {
    text: "Image description"
  },
  hint: "Images must be 960px by 640px",
  name: "#{name}[image_alt_text]",
  id: "#{id}_image_alt_text",
  value: promotional_feature_item.image_alt_text,
  error_items: errors_for(promotional_feature_item.errors, :image_alt_text)
} %>
