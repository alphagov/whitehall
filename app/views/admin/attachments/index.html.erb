<% content_for :page_title, "Attachments for #{attachable_model_name}" %>
<% content_for :title, "Attachments for #{attachable_model_name}" %>
<% if attachable.is_a?(Edition) %>
  <% content_for :context, "#{attachable.title}" %>
<% elsif attachable.is_a?(PolicyGroup) %>
  <% content_for :context, "#{attachable.name}" %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render "components/secondary_navigation", {
      aria_label: "Document navigation",
      items: secondary_navigation_tabs_items(attachable, request.path),
    } %>

    <%= render "govuk_publishing_components/components/inset_text", {
      text: attachment_note(attachable_model_name),
    } %>

    <%= render "govuk_publishing_components/components/heading", {
      text: "Add new attachment",
      margin_bottom: 2,
      font_size: "l",
    } %>
    <ul class="govuk-list">
      <li>
        <%= link_to "Upload new file attachment", new_polymorphic_path([:admin, typecast_for_attachable_routing(attachable), FileAttachment]), class: "govuk-link govuk-link--no-visited-state" %>
      </li>
      <% if attachable.is_a?(Edition) %>
        <li>
          <%= link_to "Bulk upload multiple files", new_admin_edition_bulk_upload_path(attachable), class: "govuk-link govuk-link--no-visited-state" %>
        </li>
      <% end %>
      <% if attachable.allows_html_attachments? %>
        <li>
          <%= link_to "Add new HTML attachment", new_polymorphic_path([:admin, typecast_for_attachable_routing(attachable), HtmlAttachment]), class: "govuk-link govuk-link--no-visited-state" %>
        </li>
      <% end %>
      <% if attachable.allows_external_attachments? %>
        <li>
          <%= link_to "Add new external attachment", new_polymorphic_path([:admin, typecast_for_attachable_routing(attachable), ExternalAttachment]), class: "govuk-link govuk-link--no-visited-state" %>
        </li>
      <% end %>
    </ul>
    <div class="govuk-!-margin-bottom-8">
      <%= render "govuk_publishing_components/components/details", {
        title: "You must upload attachments in an open standards format.",
      } do %>
        <p>For example, if an attachment is text-based and designed to be edited it should be uploaded to GOV.UK as an .odt (OpenDocument text) file instead of a closed format like .docx.</p>
        <p>Read more about <%= link_to "open standards formats", "https://www.gov.uk/guidance/content-design/planning-content#open-formats", class: "govuk-link govuk-link--no-visited-state" %>.</p>
      <% end %>
    </div>

    <%= render "govuk_publishing_components/components/heading", {
      text: "Attachments",
      font_size: "l",
      margin_bottom: 3,
    } %>

    <%= render("attachments", attachable: attachable) if attachable.attachments.any? %>
  </div>
</div>
