<% page_heading = "Preview document type change" %>
<% content_for :page_title, page_heading %>
<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: change_type_admin_standard_edition_path(@edition),
  } %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l"><%= page_heading %></h1>

    <p class="govuk-body">
      You are about to change the document type of “<%= @edition.title %>”
      from <strong><%= @old_type.label %></strong>
      to <strong><%= @new_type.label %></strong>. A summary of the changes is
      shown below. Please review these carefully before proceeding.
    </p>

    <%= render(
          Admin::Editions::DocumentTypeChangeSummary.new(
            edition: @edition,
            old_type: @old_type,
            new_type: @new_type,
          ),
        ) %>

    <%= form_with method: "patch", url: apply_change_type_admin_standard_edition_path(@edition) do %>
      <%= hidden_field_tag :configurable_document_type, @new_type.key %>
      <div class="govuk-button-group">
        <%= render "govuk_publishing_components/components/button", {
          text: "Confirm document type change",
        } %>
        <%= link_to(
              "Cancel",
              admin_edition_path(@edition),
              class: "govuk-link govuk-link--no-visited-state",
            ) %>
      </div>
    <% end %>
  </div>
</div>
