<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: admin_document_collection_groups_path(@collection),
  } %>
<% end %>
<% content_for :page_title, @group.heading %>
<% content_for :title, @group.heading %>
<% content_for :context, @collection.title %>
<% content_for :title_margin_bottom, 4 %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <p class="govuk-body">
      <%= link_to "Preview on website (opens in a new tab)", @collection.public_url(draft: true), class: "govuk-link", target: "_blank" %>
    </p>

    <%= render "components/secondary_navigation", {
      aria_label: "Document collection group navigation tabs",
      items: secondary_navigation_tabs_items(@group, request.path)
    } %>

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-three-quarters">
        <%= render "govuk_publishing_components/components/heading", {
          text: "Documents",
          margin_bottom: 6,
        } %>
      </div>

      <div class="govuk-grid-column-one-quarter">
        <p class="govuk-body govuk-!-text-align-right">
          <%= link_to "Add document", "#", class: "govuk-link" %>
        </p>
      </div>
    </div>

    <% if @group.memberships.present? %>
      <div class="govuk-table--with-actions">
        <%= render "govuk_publishing_components/components/table", {
          rows: @group.memberships.map do |membership|
            [
              {
                text: membership.document.latest_edition.title,
              },
              {
                text: link_to("View", membership.document.latest_edition.public_url, class: "govuk-link") +
                  link_to("Delete", "#", class: "govuk-link gem-link--destructive govuk-!-margin-left-3")
              }
            ]
          end
        } %>
      </div>
    <% else %>
      <%= render "govuk_publishing_components/components/warning_text", {
        text: "There are no documents inside this group"
      } %>

      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
    <% end %>
  </div>
</div>
