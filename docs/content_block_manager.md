# Content Block Manager

## What is it?

The Content Block Manager is a "mini application" within Whitehall, packaged as a Rails Engine.

## Where is it?

All the code (including tests) for the engine is located at [`lib/engines/content_block_manager`](https://github.com/alphagov/whitehall/tree/main/lib/engines/content_block_manager). 

## Why is is packaged this way?

The rationale for packaging the code in this way can be found in [ADR-0004](https://github.com/alphagov/whitehall/blob/main/docs/adr/0004-content-object-store-added-with-a-rails-engine.md)

## How to access the Content Block Manager

The Content Block Manager is listed as an app within Signon, separate from Whitehall.

The Content Block Manager link on signon integration was generated by running the below command in signon kubernetes 
(refer to the [signon usage documentation for details](https://docs.publishing.service.gov.uk/repos/signon/usage.html)).

```
rake applications:create name="Content block manager" description="Create, edit and use modular content" \
     home_uri="https://whitehall-admin.integration.publishing.service.gov.uk/content-block-manager" \
     redirect_uri="https://whitehall-admin.integration.publishing.service.gov.uk/content-block-manager/auth/gds/callback"
```

This was inspired by the [Mainstream team's work on the Homepage app within Publisher](https://github.com/alphagov/publisher/blob/main/docs/homepage.md).
As with the Homepage app, permissions are managed through the Whitehall app, rather than the "app" itself.

## Why is this being added directly to the Signon landing page?

The functionality itself will sit within Whitehall. However, weâ€™ve made the decision to make the Content Block Manager
behave as a seperate app, because we (like the Mainstream team) believe that users should simply be able to select what 
action they want to perform, rather than having to understand what app they need to use to accomplish a task. 
Additionally, the navigation within Whitehall is already very crowded with a lot of functionality buried underneath the 
"More" menu, and we don't want to add to this noise

We have already done some light touch testing with users, and we believe this approach is widely understood and agreed.
