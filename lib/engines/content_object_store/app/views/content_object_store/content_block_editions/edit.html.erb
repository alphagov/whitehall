<% content_for :context, "Object store" %>
<% content_for :title, "Change #{@schema.name}" %>

<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: content_object_store.content_object_store_content_block_edition_path(@content_block_edition),
  } %>
<% end %>

<%= form_with model: @content_block_edition, as: :content_block_edition, url: content_object_store.content_object_store_content_block_edition_path do |f| %>
  <%= render "govuk_publishing_components/components/input", {
    label: {
      text: "Title",
    },
    name: "content_object_store_content_block_edition[document_title]",
    id: "content_object_store_content_block_edition_document_title",
    value: @content_block_edition.document.title,
    error_items: errors_for(@content_block_edition.errors, :document_title),
  } %>

  <% @content_block_edition.details.each do |key, value| %>
    <%= render "govuk_publishing_components/components/input", {
      label: {
        text: key.humanize,
      },
      name: "content_object_store_content_block_edition[details[#{key}]]",
      id: "content_object_store_content_block_edition_details_#{key}",
      value: value,
    } %>
  <% end %>

  <div class="govuk-button-group govuk-!-margin-bottom-6">
    <%= render "govuk_publishing_components/components/button", {
      text: "Save and continue",
      name: "save_and_continue",
      value: "Save and continue",
      type: "submit",
      data_attributes: {
        module: "gem-track-click",
        "track-category": "form-button",
        "track-action": "#{f.object.class.name.demodulize.underscore.dasherize}-button",
        "track-label": "Save and continue",
      },
    } %>
    <%= link_to("Cancel", content_object_store.content_object_store_content_block_edition_path(@content_block_edition), class: "govuk-link") %>
  </div>
<% end %>
