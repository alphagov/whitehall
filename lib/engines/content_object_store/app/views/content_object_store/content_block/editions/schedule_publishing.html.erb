<% content_for :context, "Manage #{add_indefinite_article @content_block_document.block_type.humanize}" %>
<% content_for :title, "When do you want to publish the change?" %>
<% content_for :title_margin_bottom, 4 %>
<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: content_object_store.edit_content_object_store_content_block_edition_path(
      id: @content_block_edition.id,
      content_block_edition: @edition_params,
      step: ContentObjectStore::ContentBlock::EditionsController::EDIT_FORM_STEPS[:review_links],
    ),
  } %>
<% end %>

<p class="govuk-body">Choose when you would like the change to be made.</p>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with url: content_object_store.content_object_store_content_block_edition_path(content_block_edition: @edition_params), method: :patch do %>

      <%= render "govuk_publishing_components/components/radio", {
        name: "schedule_publishing",
        id: "schedule_publishing",
        heading_size: "xl",
        items: [
          {
            value: "now",
            text: "Publish the change now",
          },
          {
            value: "schedule",
            text: "Schedule the change for the future",
            conditional: render("components/datetime_fields", {
              heading_size: "s",
              field_name: "scheduled_publication",
              prefix: "scheduled_at",
              date_heading: "Date",
              date_hint: "For example, 01 08 2025",
              year: {
                id: "scheduled_at_scheduled_publication_1i",
                name: "scheduled_at[scheduled_publication(1i)]",
                label: "Year",
                width: 4,
              },
              month: {
                id: "scheduled_at_scheduled_publication_2i",
                name: "scheduled_at[scheduled_publication(2i)]",
                label: "Month",
                width: 2,
              },
              day: {
                id: "scheduled_at_scheduled_publication_3i",
                name: "scheduled_at[scheduled_publication(3i)]",
                label: "Day",
                width: 2,
              },
              hour: {
                id: "scheduled_at_scheduled_publication_4i",
                name: "scheduled_at[scheduled_publication(4i)]",
              },
              minute: {
                id: "scheduled_at_scheduled_publication_5i",
                name: "scheduled_at[scheduled_publication(5i)]",
              },
            }),
          },
        ],
      } %>
      <div class="govuk-button-group govuk-!-margin-bottom-6">
        <%= render "govuk_publishing_components/components/button", {
          text: "Accept and publish",
          name: "accept_and_publish",
          value: "Accept and publish",
          type: "submit",
        } %>
        <%= link_to("Cancel", content_object_store.content_object_store_content_block_documents_path, class: "govuk-link") %>
      </div>
    <% end %>

  </div>
</div>
